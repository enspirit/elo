(lambda _: kAssert(kPatch({}, ["name"], "Alice") == {"name": "Alice"}))(None)
(lambda _: kAssert(kPatch({"name": "Alice"}, ["name"], "Bob") == {"name": "Bob"}))(None)
(lambda _: kAssert(kPatch({"name": "Alice"}, ["age"], 30) == {"name": "Alice", "age": 30}))(None)
(lambda _: kAssert(kPatch({}, ["user", "name"], "Bob") == {"user": {"name": "Bob"}}))(None)
(lambda _: kAssert(kPatch({}, ["foo", 0, "bar"], 12) == {"foo": [{"bar": 12}]}))(None)
(lambda _: kAssert(kPatch({"items": [1, 2, 3]}, ["items", 1], 99) == {"items": [1, 99, 3]}))(None)
(lambda _: kAssert(kPatch({"items": [1]}, ["items", 3], 99) == {"items": [1, None, None, 99]}))(None)
(lambda _: kAssert(kPatch(None, ["x"], 1) == {"x": 1}))(None)
(lambda _: kAssert(kPatch({}, ["a", "b", "c"], 1) == {"a": {"b": {"c": 1}}}))(None)
(lambda _: kAssertFails(lambda: kPatch([], ["foo"], 1)))(None)
(lambda _: kAssertFails(lambda: kPatch([1, 2, 3], ["foo"], 1)))(None)
(lambda _: kAssertFails(lambda: kPatch({"foo": []}, ["foo", "bar"], 1)))(None)
