(raise "Assertion failed" unless !(42).nil? == true; true)
(raise "Assertion failed" unless !("hello").nil? == true; true)
(raise "Assertion failed" unless !(true).nil? == true; true)
(raise "Assertion failed" unless (->(v) { v.nil? ? 0 : v }).call(42) == 42; true)
(raise "Assertion failed" unless (->(v) { v.nil? ? "default" : v }).call("hello") == "hello"; true)
(raise "Assertion failed" unless (->(v) { v.nil? ? 0 : v }).call(1 + 1) == 2; true)
(raise "Assertion failed" unless "hello".index("l") == 2; true)
(raise "Assertion failed" unless !("hello".index("l")).nil? == true; true)
(raise "Assertion failed" unless !("hello".index("x")).nil? == false; true)
(raise "Assertion failed" unless (->(v) { case v when NilClass; 'NoVal' when ActiveSupport::Duration; 'Duration' when Date, DateTime, Time; 'DateTime' when Integer; 'Int' when Float; 'Float' when TrueClass, FalseClass; 'Bool' when String; 'String' when Proc; 'Fn' else 'Object' end }).call("hello".index("x")) == "NoVal"; true)
(raise "Assertion failed" unless (->(v) { v.nil? ? -1 : v }).call("hello".index("x")) == -1; true)
(raise "Assertion failed" unless (->(v) { v.nil? ? -1 : v }).call("hello".index("l")) == 2; true)
